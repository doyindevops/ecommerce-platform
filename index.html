
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ecommerce Platform - Cloud DevOps Portfolio</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 40px;
            background: #f9f9f9;
            color: #333;
        }
        pre {
            background-color: #eee;
            padding: 10px;
            overflow-x: auto;
        }
        code {
            background-color: #f4f4f4;
            padding: 2px 4px;
            border-radius: 3px;
        }
        h1, h2, h3 {
            color: #2c3e50;
        }
        a {
            color: #007acc;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
<pre>

# ğŸš€ E-Commerce Platform on AWS EKS with ArgoCD, Docker & Monitoring

Welcome to a **fully containerized microservices-based e-commerce platform**, built using **Flask**, deployed on **Amazon EKS**, managed via **ArgoCD**, and monitored using the **ELK stack and Grafana**.

---

## ğŸ§± Project Structure

```bash
ecommerce-platform/
â”‚
â”œâ”€â”€ cart-service/                  # Microservice: Cart
â”œâ”€â”€ order-service/                 # Microservice: Orders
â”œâ”€â”€ product-service/               # Microservice: Products
â”œâ”€â”€ k8s/                           # All Kubernetes manifests
â”‚   â”œâ”€â”€ argo-app.yaml              # ArgoCD App config
â”‚   â”œâ”€â”€ ingress.yaml               # Kong Ingress configuration
â”‚   â”œâ”€â”€ elasticsearch.yaml         # Elasticsearch setup
â”‚   â”œâ”€â”€ kibana.yaml                # Kibana Dashboard
â”‚   â”œâ”€â”€ fluentd-daemonset.yaml     # Fluentd for logging
â”‚   â”œâ”€â”€ values.yaml                # Helm values
â”‚   â””â”€â”€ add-t3-large-nodegroup.yaml # Cluster upgrade YAML
â””â”€â”€ .gitignore
```

---

## ğŸ§  Architecture Overview

![Architecture](architecture.png)

---

## ğŸ¥ Full Walkthrough Videos

> âœ… All videos demonstrate real-time configuration, deployment, debugging, and resolution.

- ğŸ”¹ **Cluster Scaling & Nodegroup Fix**: [`add-t3-large-nodegroup.yaml`](add-t3-large-nodegroup.yaml)
- ğŸ”¹ **Microservice Build & Push to DockerHub**
- ğŸ”¹ **ArgoCD Setup, GitHub Integration, and Sync**
- ğŸ”¹ **Pod Scheduling Issue Troubleshooting**
- ğŸ”¹ **ELK Stack & Fluentd Logging**
- ğŸ”¹ **Grafana Dashboard Configuration**

---

## ğŸ› Error Fix: ArgoCD Pending Pods

### âŒ Problem

```bash
0/2 nodes are available: 2 Too many pods.
```

### ğŸ“Œ Root Cause

- `t3.micro` EC2 instances have low ENI capacity â†’ max 4-5 pods
- EKS + CoreDNS + aws-node pods already consume most capacity

### âœ… Fix

- Created a `t3.large` node group using the file:

```yaml
# k8s/add-t3-large-nodegroup.yaml
eksctl create nodegroup -f add-t3-large-nodegroup.yaml
```

- Drained & deleted `t3.micro` nodes to migrate workloads:

```bash
kubectl drain <node> --ignore-daemonsets --delete-emptydir-data
eksctl delete nodegroup --name standard-workers --cluster ecommerce-cluster --region us-east-1
```

---

## âš™ï¸ GitOps Flow with ArgoCD

- Configured ArgoCD to sync with GitHub repo
- Application YAML managed under `k8s/` folder
- On every push, ArgoCD auto-syncs the cluster state

![ArgoCD GitHub Synced](GITHUB%20CONNECTED%20TO%20ARGOCD.png)

---

## ğŸŒ Exposing Services via Kong Ingress

- Kong ingress exposes the services via AWS ELB:

```
http://<elb-dns>/products
http://<elb-dns>/orders
http://<elb-dns>/cart
```

- Example Ingress Spec:

```yaml
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: ecommerce-ingress
  annotations:
    konghq.com/strip-path: "false"
spec:
  ingressClassName: kong
  rules:
    - http:
        paths:
        - path: /products
          backend:
            service:
              name: product-service
              port:
                number: 80
```

---

## ğŸ“¦ Microservices

Each service follows the same structure:
- `app.py`: Flask routes
- `Dockerfile`: For containerization
- `requirements.txt`: Python dependencies

---

## ğŸ“Š Observability

- **Elasticsearch + Fluentd + Kibana (EFK)** stack for logging
- **Grafana** for metrics and visualization

---

## ğŸ§  Lessons & Takeaways

- EKS node type selection is critical
- GitOps workflows improve consistency
- Logging and Monitoring are crucial from Day 1
- Use `kubectl get events` and `kubectl describe pod` for deep troubleshooting

---

## ğŸ”— DockerHub Repos

- [`adedoyine/cart-service`](https://hub.docker.com/repository/docker/adedoyine/cart-service)
- [`adedoyine/order-service`](https://hub.docker.com/repository/docker/adedoyine/order-service)
- [`adedoyine/product-service`](https://hub.docker.com/repository/docker/adedoyine/product-service)

---

## ğŸ’¼ Built With

- ğŸ³ Docker + DockerHub
- â˜¸ï¸ Kubernetes + Amazon EKS
- âš™ï¸ ArgoCD for GitOps
- ğŸ“ˆ Grafana, Fluentd, Kibana for observability

---

## ğŸ‘‹ Let's Connect!

If you're a recruiter or engineer, feel free to check the videos, repo, or reach out!

</pre>
</body>
</html>
